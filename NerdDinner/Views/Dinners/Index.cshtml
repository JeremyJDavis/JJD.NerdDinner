@model NerdDinner.Helpers.PaginatedList<NerdDinner.Models.Dinner>

@{
    ViewBag.Title = "Index";
}

<script src="/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.2" type="text/javascript"></script>
<script src="/Scripts/Map.js" type="text/javascript"></script>

<h2>Find a Dinner</h2>

<div id="mapDivLeft">
 
    <div id="searchBox">
        Enter your location: <%=Html.TextBox("Location") %>
        <input id="search" type="submit" value="Search"/>
    </div>
 
    <div id="theMap" style="position: relative; width: 600px;height: 400px">
    </div>
 
</div>
 
<div id="mapDivRight">
    <div id="dinnerList"></div>
</div>

<script type="text/javascript">

    $(document).ready(function() {
        LoadMap();
    });

    $("#search").click(function(evt) {
        var where = jQuery.trim($("#Location").val());
        if (where.length < 1)
            return;

        FindDinnersGivenLocation(where);
    });

</script>


<h2>Upcoming Dinners</h2>

<ul>

    @foreach (var item in Model) {
        <li>
            <a href="@Url.Action("Details", new {id = item.DinnerId})">
                <span>@Html.DisplayFor(modelItem => item.Title)</span>
            </a>
            <text> on </text>
            @String.Format("{0:d}", item.EventDate.ToShortDateString())
            <text> at </text>
            @String.Format("{0:d}", item.EventDate.ToShortTimeString())
        </li>
    }
</ul>

<p>
    @Html.ActionLink("Create a Dinner", "Create")
</p>

@{
    if (Model.HasPreviousPage())
    {
        @Html.RouteLink("<<<", "UpcomingDinners", new {page = (Model.PageIndex - 1)});
    }
    if (Model.HasNextPage())
    {
        @Html.RouteLink(">>>","UpcomingDinners", new { page = (Model.PageIndex + 1)});
    }
}
