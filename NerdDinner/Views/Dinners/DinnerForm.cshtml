@model NerdDinner.Models.Dinner
    
<script src="/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate-vsdoc.js" type="text/javascript"></script>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <fieldset class="form-horizontal">
        <p>
            <div>
                <label>Dinner Title:</label>
            </div>
            @Html.TextBox("Title", Model.Title)
            @Html.ValidationMessage("Title", "", new { @class = "text-danger" })
        </p>

        <p>
            <div>
                <label>Event Date:</label>
            </div>
            @Html.TextBox("EventDate", String.Format("{0:g}", Model.EventDate))
            @Html.ValidationMessage("EventDate", "", new { @class = "text-danger" })
        </p>


        <p>
            <div>
                <label>Address:</label>
            </div>
            @Html.TextBox("Address", Model.Address)
            @Html.ValidationMessage("Address", "", new { @class = "text-danger" })
        </p>

        <p>
            <div>
                <label>Country:</label>
            </div>
            @*@Html.DropDownList("Country", null, htmlAttributes: new { @class  ="form-control"})*@
            @Html.TextBox("Country", Model.Country)
        </p>
        
        <p>
            @Html.Hidden("Latitude", Model.Latitude)
            @Html.Hidden("Longitude", Model.Longitude)

        </p>

        <p>
            <div>
                <label>Contact Email:</label>
            </div>
            @Html.TextBox("ContactEmail", Model.ContactEmail)
            @Html.ValidationMessage("ContactEmail", "", new { @class = "text-danger" })
        </p>
        
        <p>
            <input type="submit" value="Save" />
        </p>
        

        <div id="dinnerDiv">

        </div>

        <div id="mapDiv">
            @{
                Html.RenderPartial("Map", Model.Dinner);
            }
        </div>


        <script type="text/javascript">

            $(document).ready(function() {
                $("#Address").blur(function(evt) {
                    $("#Latitude").val("");
                    $("#Longitude").val("");

                    var address = jQuery.trim($("#Address").val());
                    if (address.length < 1)
                        return;

                    FindAddressOnMap(address);
                });
            });

        </script>

    </fieldset>

}
